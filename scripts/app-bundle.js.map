{"version":3,"sources":["app.js","environment.js","main.js","anticorruptionlayer/teamcity-build-adapter.js","anticorruptionlayer/teamcity-build-type-adapter.js","communicationlayer/http-client-router.js","resources/index.js","view/build-types-configuration.js","view/failed-build-overview.js","view/running-build-overview.js","communicationlayer/teamcitystub/team-city-build-types-response.js","communicationlayer/teamcitystub/team-city-http-client-stub.js","communicationlayer/teamcitystub/team-city-latest-builds-response.js","communicationlayer/teamcitystub/team-city-latest-running-builds-response.js","domain/services/build-service.js","domain/services/build-type-service.js","view/elements/build-overview.js","view/elements/build-type-label.js","C:/Users/robs/Documents/OefProjects/buildradiator/src/app.html","C:/Users/robs/Documents/OefProjects/buildradiator/src/css/custom.css","C:/Users/robs/Documents/OefProjects/buildradiator/src/view/build-types-configuration.html","C:/Users/robs/Documents/OefProjects/buildradiator/src/view/failed-build-overview.html","C:/Users/robs/Documents/OefProjects/buildradiator/src/view/running-build-overview.html","C:/Users/robs/Documents/OefProjects/buildradiator/src/view/elements/build-overview.html","C:/Users/robs/Documents/OefProjects/buildradiator/src/view/elements/build-type-label.html"],"names":["App","configureRouter","config","router","title","map","route","name","moduleId","debug","testing","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","fetchBuildArray","clientRouter","url","init","method","headers","Headers","fetch","response","json","jsonResponse","buildType","filter","buildTypeElement","builds","build","length","id","number","status","statusText","TeamcityBuildAdapter","getAllLatestFinishedBuilds","baseUrl","getAllLatestRunningBuilds","TeamcityBuildTypeAdapter","getBuildTypes","makeInit","makeBuildType","label","makeLabel","projectName","split","labelName","reduce","p1","p2","HttpClientRouter","realHttpClient","teamCityHttpClientStub","includes","BuildTypesConfiguration","service","buildTypesGroupedByLabel","activate","params","getBuildTypesGroupedByLabel","FailedBuildOverview","addToBlackListFailedBuilds","buildId","getBlackListFailedBuilds","setAllFailedBuilds","getAllFailedBuilds","bind","setInterval","RunningBuildOverview","buildService","addToBlacklistLatestRunningBuilds","getBlacklistLatestRunningBuilds","setAllRunningBuilds","makePromise","result","resolve","reject","setTimeout","TeamCityHttpClientStub","endsWith","Error","BuildService","teamcityBuildAdapter","all","latestFinishedBuilds","buildArrays","latestRunningBuilds","isNotInBlackListFailedBuilds","finishedBuild","failedBuild","drawAttention","isNewBuildRunning","getCorrespondingBuild","latestRunningBuild","undefined","buildNumber","isNotInBlacklistLatestRunningBuilds","runningBuild","localStorage","blackListFailedBuilds","JSON","stringify","concat","blacklistLatestRunningBuilds","parse","BuildTypeService","teamcityBuildTypeAdapter","buildTypes","root","element","currentRoot","addToCurrentRoot","addLabelToCurrentRootRecursivelyIfThereIsOne","addElementToCurrentRootIfNotYetThere","changeCurrentRootToNewElement","addElementToCurrentRoot","isElementTypeBuild","makeBuildElement","makeLabelElement","type","BuildOverview","showBlackList","getBuildStatusCssClass","getDrawAttentionCssClass","startDrag","event","dataTransfer","setData","target","endDrag","preventEventPropagation","preventDefault","drop","addToBlacklist","getData","getBlacklist","BuildTypeLabel","Object","keys"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\r\n  configureRouter(config, router) {\r\n    this.router = router;\r\n    config.title = 'Teamcity radiator';\r\n    config.map([\r\n      { route: 'failed/:baseUrl', name: 'Faled Build Overview', moduleId: 'view/failed-build-overview' },\r\n      { route: 'running/:baseUrl', name: 'Running Build Overview', moduleId: 'view/running-build-overview' },\r\n      { route: 'config/:baseUrl', name: 'Build Type Configuration', moduleId: 'view/build-types-configuration' }\r\n    ]);\r\n  }\r\n}","export default {\r\n  debug: true,\r\n  testing: true\r\n};\r\n","import environment from './environment';\r\n\r\n//Configure Bluebird Promises.\r\n//Note: You may want to use environment-specific configuration.\r\nPromise.config({\r\n  warnings: {\r\n    wForgottenReturn: false\r\n  }\r\n});\r\n\r\nexport function configure(aurelia) {\r\n  aurelia.use\r\n    .standardConfiguration()\r\n    .feature('resources');\r\n\r\n  if (environment.debug) {\r\n    aurelia.use.developmentLogging();\r\n  }\r\n\r\n  if (environment.testing) {\r\n    aurelia.use.plugin('aurelia-testing');\r\n  }\r\n\r\n  aurelia.start().then(() => aurelia.setRoot());\r\n}\r\n","import { HttpClientRouter } from '../communicationlayer/http-client-router';\r\nimport { inject } from 'aurelia-framework';\r\n\r\nfunction fetchBuildArray(clientRouter, url) {\r\n  let init = {\r\n    method: 'GET',\r\n    headers: new Headers({\r\n      'Accept': 'application/json',\r\n      'X-Requested-With': 'Fetch',\r\n    })\r\n  };\r\n\r\n  return clientRouter.fetch(url, init)\r\n    .then(response => response.json())\r\n    .then(jsonResponse =>\r\n      jsonResponse.buildType\r\n        .filter(buildTypeElement => buildTypeElement.builds.build.length > 0)\r\n        .map(buildTypeElement => {\r\n          return {\r\n            \"id\": buildTypeElement.id,\r\n            \"name\": buildTypeElement.name,\r\n            \"buildNumber\": buildTypeElement.builds.build[0].number,\r\n            \"status\": buildTypeElement.builds.build[0].status,\r\n            \"statusText\": buildTypeElement.builds.build[0].statusText,\r\n            \"drawAttention\": false\r\n          }\r\n        })\r\n    );\r\n}\r\n\r\n@inject(HttpClientRouter)\r\nexport class TeamcityBuildAdapter {\r\n  constructor(clientRouter) {\r\n    this.clientRouter = clientRouter;\r\n  }\r\n\r\n  getAllLatestFinishedBuilds(baseUrl) {\r\n    let url = 'http://' + baseUrl + '/guestAuth/app/rest/buildTypes?locator=affectedProject:(id:_Root)&fields=buildType(id,name,builds($locator(running:false,canceled:false,count:1),build(number,status,statusText)))';\r\n    return fetchBuildArray(this.clientRouter, url);\r\n  }\r\n\r\n  getAllLatestRunningBuilds(baseUrl) {\r\n    let url = 'http://' + baseUrl + '/guestAuth/app/rest/buildTypes?locator=affectedProject:(id:_Root)&fields=buildType(id,name,builds($locator(running:true,canceled:false,count:1),build(number,status,statusText)))';\r\n    return fetchBuildArray(this.clientRouter, url);\r\n  }\r\n}\r\n","import { HttpClientRouter } from '../communicationlayer/http-client-router';\r\nimport { inject } from 'aurelia-framework';\r\n\r\n\r\n@inject(HttpClientRouter)\r\nexport class TeamcityBuildTypeAdapter {\r\n    constructor(clientRouter) {\r\n        this.clientRouter = clientRouter;\r\n    }\r\n\r\n    getBuildTypes(url) {\r\n        return this.clientRouter.fetch('http://' + url + \"/guestAuth/app/rest/buildTypes\", makeInit())\r\n            .then(response => response.json())\r\n            .then(jsonResponse => makeBuildType(jsonResponse));\r\n\r\n        function makeInit() {\r\n            return {\r\n                method: 'GET',\r\n                headers: new Headers({\r\n                    'Accept': 'application/json',\r\n                    'X-Requested-With': 'Fetch',\r\n                })\r\n            };\r\n        }\r\n\r\n        function makeBuildType(jsonResponse) {\r\n            return jsonResponse.buildType\r\n                .map(buildTypeElement => {\r\n                    return {\r\n                        id: buildTypeElement.id,\r\n                        name: buildTypeElement.name,\r\n                        label: makeLabel(buildTypeElement.projectName)\r\n                    };\r\n                });\r\n\r\n            function makeLabel(projectName) {\r\n                return projectName.split(\" :: \")\r\n                    .map(labelName => {\r\n                        return { name: labelName };\r\n                    })\r\n                    .reduce((p1, p2) => {\r\n                        p2.label = p1;\r\n                        return p2;\r\n                    });\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n","import { HttpClient } from 'aurelia-fetch-client';\r\nimport { TeamCityHttpClientStub } from './teamcitystub/team-city-http-client-stub';\r\nimport { inject } from 'aurelia-framework';\r\n\r\n@inject(HttpClient, TeamCityHttpClientStub)\r\nexport class HttpClientRouter {\r\n    constructor(realHttpClient, teamCityHttpClientStub) {\r\n        this.realHttpClient = realHttpClient;\r\n        this.teamCityHttpClientStub = teamCityHttpClientStub;\r\n    }\r\n\r\n    fetch(url, init) {\r\n        return url.includes('stub') ? this.teamCityHttpClientStub.fetch(url) : this.realHttpClient.fetch(url, init);\r\n    }\r\n}\r\n","export function configure(config) {\r\n  //config.globalResources([]);\r\n}\r\n","import { BuildTypeService } from '../domain/services/build-type-service';\r\nimport { inject } from 'aurelia-framework';\r\n\r\n@inject(BuildTypeService)\r\nexport class BuildTypesConfiguration {\r\n    constructor(service) {\r\n        this.service = service;\r\n        this.buildTypesGroupedByLabel = {};\r\n    }\r\n\r\n    activate(params) {\r\n        this.service\r\n            .getBuildTypesGroupedByLabel(params.baseUrl)\r\n            .then(buildTypesGroupedByLabel => this.buildTypesGroupedByLabel = buildTypesGroupedByLabel);\r\n    }\r\n} ","import { BuildService } from '../domain/services/build-service';\r\nimport { inject } from 'aurelia-framework';\r\n\r\n@inject(BuildService)\r\nexport class FailedBuildOverview {\r\n  constructor(service) {\r\n    this.service = service;\r\n    this.addToBlackListFailedBuilds = buildId => service.addToBlackListFailedBuilds(buildId);\r\n    this.getBlackListFailedBuilds = () => service.getBlackListFailedBuilds();\r\n  }\r\n\r\n  activate(params) {\r\n    function setAllFailedBuilds(params) {\r\n      this.service\r\n        .getAllFailedBuilds(params.baseUrl)\r\n        .then(builds => { this.builds = builds; });\r\n    }\r\n\r\n    setAllFailedBuilds.bind(this)(params);\r\n    setInterval(setAllFailedBuilds.bind(this), 30000, params);\r\n  }\r\n}\r\n","import { BuildService } from '../domain/services/build-service';\r\nimport { inject } from 'aurelia-framework';\r\n\r\n@inject(BuildService)\r\nexport class RunningBuildOverview {\r\n  constructor(buildService) {\r\n    this.buildService = buildService;\r\n    this.addToBlacklistLatestRunningBuilds = buildId => buildService.addToBlacklistLatestRunningBuilds(buildId);\r\n    this.getBlacklistLatestRunningBuilds = () => buildService.getBlacklistLatestRunningBuilds();\r\n  }\r\n\r\n  activate(params) {\r\n    function setAllRunningBuilds(params) {\r\n      this.buildService\r\n        .getAllLatestRunningBuilds(params.baseUrl)\r\n        .then(builds => { this.builds = builds; });\r\n    }\r\n\r\n    setAllRunningBuilds.bind(this)(params);\r\n    setInterval(setAllRunningBuilds.bind(this), 30000, params);\r\n  }\r\n}\r\n","export default {\r\n    \"count\": 11,\r\n    \"href\": \"/httpAuth/app/rest/buildTypes\",\r\n    \"buildType\": [\r\n        {\r\n            \"id\": \"build_1_id\",\r\n            \"name\": \"build 1\",\r\n            \"projectName\": \"Proj1 :: SubProj1\",\r\n            \"projectId\": \"Proj1_SubProj1\",\r\n            \"href\": \"/httpAuth/app/rest/buildTypes/id:build_1_id\",\r\n            \"webUrl\": \"http://testurl.com/viewType.html?buildTypeId=build_1_id\"\r\n        },\r\n        {\r\n            \"id\": \"build_2_id\",\r\n            \"name\": \"build 2\",\r\n            \"projectName\": \"Proj1 :: SubProj1\",\r\n            \"projectId\": \"Proj1_SubProj1\",\r\n            \"href\": \"/httpAuth/app/rest/buildTypes/id:build_2_id\",\r\n            \"webUrl\": \"http://testurl.com/viewType.html?buildTypeId=build_2_id\"\r\n        },\r\n        {\r\n            \"id\": \"build_3_id\",\r\n            \"name\": \"build 3\",\r\n            \"projectName\": \"Proj2 :: SubProj1\",\r\n            \"projectId\": \"Proj1_SubProj1\",\r\n            \"href\": \"/httpAuth/app/rest/buildTypes/id:build_3_id\",\r\n            \"webUrl\": \"http://testurl.com/viewType.html?buildTypeId=build_3_id\"\r\n        },\r\n        {\r\n            \"id\": \"build_4_id\",\r\n            \"name\": \"build 4\",\r\n            \"projectName\": \"Proj2 :: SubProj1\",\r\n            \"projectId\": \"Proj1_SubProj1\",\r\n            \"href\": \"/httpAuth/app/rest/buildTypes/id:build_4_id\",\r\n            \"webUrl\": \"http://testurl.com/viewType.html?buildTypeId=build_4_id\"\r\n        },\r\n        {\r\n            \"id\": \"build_5_id\",\r\n            \"name\": \"same name as other build\",\r\n            \"projectName\": \"Proj1 :: SubProj2\",\r\n            \"projectId\": \"Proj1_SubProj1\",\r\n            \"href\": \"/httpAuth/app/rest/buildTypes/id:build_5_id\",\r\n            \"webUrl\": \"http://testurl.com/viewType.html?buildTypeId=build_5_id\"\r\n        },\r\n        {\r\n            \"id\": \"build_6_id\",\r\n            \"name\": \"same name as other build\",\r\n            \"projectName\": \"Proj1 :: SubProj4\",\r\n            \"projectId\": \"Proj1_SubProj1\",\r\n            \"href\": \"/httpAuth/app/rest/buildTypes/id:build_6_id\",\r\n            \"webUrl\": \"http://testurl.com/viewType.html?buildTypeId=build_6_id\"\r\n        },\r\n        {\r\n            \"id\": \"build_7_id\",\r\n            \"name\": \"build 7\",\r\n            \"projectName\": \"Proj1 :: SubProj2\",\r\n            \"projectId\": \"Proj1_SubProj1\",\r\n            \"href\": \"/httpAuth/app/rest/buildTypes/id:build_7_id\",\r\n            \"webUrl\": \"http://testurl.com/viewType.html?buildTypeId=build_7_id\"\r\n        },\r\n        {\r\n            \"id\": \"build_8_id\",\r\n            \"name\": \"build 8\",\r\n            \"projectName\": \"Proj1 :: SubProj1\",\r\n            \"projectId\": \"Proj1_SubProj1\",\r\n            \"href\": \"/httpAuth/app/rest/buildTypes/id:build_8_id\",\r\n            \"webUrl\": \"http://testurl.com/viewType.html?buildTypeId=build_8_id\"\r\n        },\r\n        {\r\n            \"id\": \"build_9_id\",\r\n            \"name\": \"build 9\",\r\n            \"projectName\": \"Proj1 :: SubProj1\",\r\n            \"projectId\": \"Proj1_SubProj1\",\r\n            \"href\": \"/httpAuth/app/rest/buildTypes/id:build_9_id\",\r\n            \"webUrl\": \"http://testurl.com/viewType.html?buildTypeId=build_9_id\"\r\n        },\r\n        {\r\n            \"id\": \"build_10_id\",\r\n            \"name\": \"build 3\",\r\n            \"projectName\": \"Proj1 :: SubProj1 :: SubProj1\",\r\n            \"projectId\": \"Proj1_SubProj1\",\r\n            \"href\": \"/httpAuth/app/rest/buildTypes/id:build_3_id\",\r\n            \"webUrl\": \"http://testurl.com/viewType.html?buildTypeId=build_3_id\"\r\n        },\r\n        {\r\n            \"id\": \"build_25_id\",\r\n            \"name\": \"build 25\",\r\n            \"projectName\": \"Proj5\",\r\n            \"projectId\": \"Proj1_SubProj1\",\r\n            \"href\": \"/httpAuth/app/rest/buildTypes/id:build_25_id\",\r\n            \"webUrl\": \"http://testurl.com/viewType.html?buildTypeId=build_25_id\"\r\n        },\r\n    ]\r\n};","import teamCitylatestBuildsResponse from './team-city-latest-builds-response';\r\nimport teamCitylatestRunningBuildsResponse from './team-city-latest-running-builds-response';\r\nimport teamCityBuildTypesResponse from './team-city-build-types-response';\r\n\r\nfunction makePromise(result) {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(function () {\r\n      resolve(result)\r\n    }, 500);\r\n  });\r\n}\r\n\r\nexport class TeamCityHttpClientStub {\r\n  fetch(url) {\r\n    if (url.includes('running:false')) {\r\n      return makePromise({ json: () => teamCitylatestBuildsResponse });\r\n    }\r\n    if (url.includes('running:true')) {\r\n      return makePromise({ json: () => teamCitylatestRunningBuildsResponse });\r\n    }\r\n    if (url.endsWith('/guestAuth/app/rest/buildTypes')) {\r\n      return makePromise({ json: () => teamCityBuildTypesResponse });\r\n    }\r\n    throw new Error(\"team city http client stub doesn't support \" + url);\r\n  }\r\n};\r\n","export default {\r\n  \"buildType\": [\r\n    {\r\n      \"id\": \"build_1_id\",\r\n      \"name\": \"build 1\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"number\": \"3.1.70.17327\",\r\n            \"status\": \"FAILURE\",\r\n            \"statusText\": \"Tests passed: 198, ignored: 9\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"build_2_id\",\r\n      \"name\": \"build 2\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"number\": \"3.1.6965.17318\",\r\n            \"status\": \"SUCCESS\",\r\n            \"statusText\": \"Tests passed: 2391, ignored: 6\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"build_3_id\",\r\n      \"name\": \"build 3\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"number\": \"123\",\r\n            \"status\": \"SUCCESS\",\r\n            \"statusText\": \"Tests passed: 35\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"build_4_id\",\r\n      \"name\": \"build 4\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"number\": \"3.1.54.17253\",\r\n            \"status\": \"SUCCESS\",\r\n            \"statusText\": \"Tests passed: 35\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"build_5_id\",\r\n      \"name\": \"same name as other build\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"number\": \"3.1.54.17287\",\r\n            \"status\": \"FAILURE\",\r\n            \"statusText\": \"Tests failed: 4 (1 new), passed: 31\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"build_6_id\",\r\n      \"name\": \"same name as other build\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"number\": \"1.2.54.17287\",\r\n            \"status\": \"FAILURE\",\r\n            \"statusText\": \"Tests failed: 2, passed: 33; snapshot dependency failed: Main :: Data Quality Tests :: build 6\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"build_7_id\",\r\n      \"name\": \"build 7\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"number\": \"3.5.54.17287\",\r\n            \"status\": \"FAILURE\",\r\n            \"statusText\": \"Tests failed: 3, passed: 32; snapshot dependency failed: Main :: Data Quality Tests :: build 7\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"build_8_id\",\r\n      \"name\": \"build 8\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"number\": \"3.5.87.17287\",\r\n            \"status\": \"SUCCESS\",\r\n            \"statusText\": \"Tests failed: 8 (1 new), passed: 27; snapshot dependency failed: Main :: Data Quality Tests :: build 8\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"build_9_id\",\r\n      \"name\": \"build 9\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"number\": \"3.5.99.17287\",\r\n            \"status\": \"FAILURE\",\r\n            \"statusText\": \"Tests failed: 13, passed: 22; snapshot dependency failed: Main :: Data Quality Tests :: build 9\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"build_10_id\",\r\n      \"name\": \"build 10\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"number\": \"3.5.99.21\",\r\n            \"status\": \"FAILURE\",\r\n            \"statusText\": \"Tests failed: 10, passed: 25\"\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  ]\r\n};","export default {\r\n  \"buildType\": [\r\n    {\r\n      \"id\": \"build_1_id\",\r\n      \"name\": \"build 1\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"number\": \"3.1.70.17328\",\r\n            \"status\": \"SUCCESS\",\r\n            \"statusText\": \"Tests passed: 198, ignored: 9\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"build_25_id\",\r\n      \"name\": \"build 25\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"number\": \"3.1.6965.17318\",\r\n            \"status\": \"SUCCESS\",\r\n            \"statusText\": \"Tests passed: 2391, ignored: 6\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"build_3_id\",\r\n      \"name\": \"build 3\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"number\": \"120\",\r\n            \"status\": \"FAILURE\",\r\n            \"statusText\": \"Tests passed: 35\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"id\": \"build_4_id\",\r\n      \"name\": \"build 4\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"number\": \"3.1.54.17255\",\r\n            \"status\": \"FAILURE\",\r\n            \"statusText\": \"Tests passed: 35\"\r\n          }\r\n        ]\r\n      }\r\n    }]\r\n};","import { TeamcityBuildAdapter } from '../../anticorruptionlayer/teamcity-build-adapter';\r\nimport { inject } from 'aurelia-framework';\r\n\r\n@inject(TeamcityBuildAdapter)\r\nexport class BuildService {\r\n    constructor(teamcityBuildAdapter) {\r\n        this.teamcityBuildAdapter = teamcityBuildAdapter;\r\n    }\r\n\r\n    getAllFailedBuilds(baseUrl) {\r\n        return Promise.all([this.teamcityBuildAdapter.getAllLatestFinishedBuilds(baseUrl), this.teamcityBuildAdapter.getAllLatestRunningBuilds(baseUrl)])\r\n            .then(buildArrays => {\r\n\r\n                let latestFinishedBuilds = buildArrays[0];\r\n                let latestRunningBuilds = buildArrays[1];\r\n\r\n                function isNotInBlackListFailedBuilds(finishedBuild) {\r\n                    return !this.getBlackListFailedBuilds().includes(finishedBuild.id);\r\n                }\r\n\r\n                return latestFinishedBuilds\r\n                    .filter(finishedBuild => finishedBuild.status === 'FAILURE')\r\n                    .filter(finishedBuild => isNotInBlackListFailedBuilds.bind(this)(finishedBuild))\r\n                    .map(failedBuild => {\r\n                        failedBuild.drawAttention = isNewBuildRunning();\r\n                        return failedBuild;\r\n\r\n                        function isNewBuildRunning() {\r\n\r\n                            function getCorrespondingBuild() {\r\n                                return latestRunningBuilds.filter(latestRunningBuild => latestRunningBuild.id === failedBuild.id)[0];\r\n                            }\r\n\r\n                            return getCorrespondingBuild() !== undefined && getCorrespondingBuild().buildNumber > failedBuild.buildNumber;\r\n                        }\r\n                    });\r\n            });\r\n    }\r\n\r\n    getAllLatestRunningBuilds(baseUrl) {\r\n        function isNotInBlacklistLatestRunningBuilds(runningBuild) {\r\n            return !this.getBlacklistLatestRunningBuilds().includes(runningBuild.id);\r\n        }\r\n\r\n        return this.teamcityBuildAdapter.getAllLatestRunningBuilds(baseUrl)\r\n            .then(latestRunningBuilds => latestRunningBuilds\r\n                .filter(latestRunningBuild => isNotInBlacklistLatestRunningBuilds.bind(this)(latestRunningBuild))\r\n                .map(latestRunningBuild => {\r\n                    latestRunningBuild.drawAttention = true;\r\n                    return latestRunningBuild;\r\n                }));\r\n    }\r\n\r\n    addToBlackListFailedBuilds(buildId) {\r\n        localStorage.blackListFailedBuilds = JSON.stringify(this.getBlackListFailedBuilds().concat(buildId));\r\n    }\r\n\r\n    addToBlacklistLatestRunningBuilds(buildId) {\r\n        localStorage.blacklistLatestRunningBuilds = JSON.stringify(this.getBlacklistLatestRunningBuilds().concat(buildId));\r\n    }\r\n\r\n    getBlackListFailedBuilds(buildId) {\r\n        return localStorage.blackListFailedBuilds ? JSON.parse(localStorage.blackListFailedBuilds) : [];\r\n    }\r\n\r\n    getBlacklistLatestRunningBuilds(buildId) {\r\n        return localStorage.blacklistLatestRunningBuilds ? JSON.parse(localStorage.blacklistLatestRunningBuilds) : [];\r\n    }\r\n}\r\n","import { TeamcityBuildTypeAdapter } from '../../anticorruptionlayer/teamcity-build-type-adapter';\r\nimport { inject } from 'aurelia-framework';\r\n\r\n@inject(TeamcityBuildTypeAdapter)\r\nexport class BuildTypeService {\r\n    constructor(teamcityBuildTypeAdapter) {\r\n        this.teamcityBuildTypeAdapter = teamcityBuildTypeAdapter;\r\n    }\r\n\r\n    getBuildTypesGroupedByLabel(baseUrl) {\r\n        return this.teamcityBuildTypeAdapter.getBuildTypes(baseUrl)\r\n            .then(buildTypes => {\r\n                return buildTypes.reduce((root, element) => {\r\n                    let currentRoot = root;\r\n                    addToCurrentRoot(element);\r\n                    return root;\r\n\r\n                    function addToCurrentRoot(element) {\r\n                        addLabelToCurrentRootRecursivelyIfThereIsOne();\r\n                        addElementToCurrentRootIfNotYetThere();\r\n                        changeCurrentRootToNewElement();\r\n\r\n                        function changeCurrentRootToNewElement() {\r\n                            currentRoot = currentRoot[element.name];\r\n                        }\r\n\r\n                        function addLabelToCurrentRootRecursivelyIfThereIsOne() {\r\n                            if (element.label) {\r\n                                addToCurrentRoot(element.label);\r\n                            }\r\n                        }\r\n\r\n                        function addElementToCurrentRootIfNotYetThere() {\r\n                            if (!currentRoot[element.name]) {\r\n                                addElementToCurrentRoot();\r\n                            }\r\n\r\n                            function addElementToCurrentRoot() {\r\n                                currentRoot[element.name] = isElementTypeBuild() ?  \r\n                                makeBuildElement():\r\n                                makeLabelElement();\r\n\r\n                                function isElementTypeBuild() {\r\n                                    return element.id;\r\n                                }\r\n\r\n                                function makeBuildElement() {\r\n                                    return { id: element.id, type: \"build\" };\r\n                                }\r\n\r\n                                function makeLabelElement() {\r\n                                    return  { type: \"label\" };\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }, {type: \"label\"});\r\n            });\r\n    }\r\n}","import { bindable } from 'aurelia-framework';\r\n\r\nexport class BuildOverview {\r\n    @bindable builds;\r\n    @bindable addToBlacklist;\r\n    @bindable getBlacklist;\r\n\r\n    constructor() {\r\n        this.showBlackList = false;\r\n    }\r\n\r\n    getBuildStatusCssClass(build) {\r\n        if (build.status === 'SUCCESS') {\r\n            return 'alert-success';\r\n        }\r\n        if (build.status === 'FAILURE') {\r\n            return 'alert-danger';\r\n        }\r\n        throw new Error('The buildstatus \"' + build.status + '\" is invalid')\r\n    }\r\n\r\n    getDrawAttentionCssClass(build) {\r\n        if (build.drawAttention === true) {\r\n            return 'draw-attention';\r\n        }\r\n        if (build.drawAttention === false) {\r\n            return '';\r\n        }\r\n        throw new Error('The drawAttention \"' + build.drawAttention + '\" is invalid')\r\n    }\r\n\r\n    startDrag(event) {\r\n        this.showBlackList = true;\r\n        event.dataTransfer.setData(\"id\", event.target.id);\r\n        return true;\r\n    }\r\n\r\n    endDrag(event) {\r\n        this.showBlackList = false;\r\n    }\r\n\r\n    preventEventPropagation(event) {\r\n        event.preventDefault();\r\n    }\r\n\r\n    drop(event) {\r\n        this.addToBlacklist(event.dataTransfer.getData(\"id\"));\r\n        this.builds = this.builds.filter(build => !this.getBlacklist().includes(build.id));\r\n        this.showBlackList = false;\r\n    }\r\n}\r\n","import { bindable } from 'aurelia-framework';\r\n\r\nexport class BuildTypeLabel {\r\n    @bindable buildTypesGroupedByLabel;\r\n\r\n    get keysBuildTypeLabel() {\r\n        return Object.keys(this.buildTypesGroupedByLabel);\r\n    }\r\n}",null,null,null,null,null,null,null],"sourceRoot":"..\\src"}